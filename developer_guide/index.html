
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../api/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.26">
    
    
      
        <title>Developer Guide - Teal</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#developer-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Teal" class="md-header__button md-logo" aria-label="Teal" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Teal
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Developer Guide
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/rueedlinger/teal" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Teal" class="md-nav__button md-logo" aria-label="Teal" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Teal
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rueedlinger/teal" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../releases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releases
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    REST API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Developer Guide
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Developer Guide
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      Python
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-python-3120-using-pyenv" class="md-nav__link">
    <span class="md-ellipsis">
      Install Python 3.12.0 Using pyenv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-virtual-environment-named-teal" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Virtual Environment Named 'teal'
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activate-the-virtual-environment-teal" class="md-nav__link">
    <span class="md-ellipsis">
      Activate the Virtual Environment 'teal'
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dependencies-from-requirementstxt" class="md-nav__link">
    <span class="md-ellipsis">
      Install Dependencies from requirements.txt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Update Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-binaries" class="md-nav__link">
    <span class="md-ellipsis">
      Install Binaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#startup-the-fastapi-app" class="md-nav__link">
    <span class="md-ellipsis">
      Startup the FastAPI app
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-the-app-with-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      Starting the App with Docker Compose
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unitintegration-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Unit/Integration Testing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Load Testing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Load Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#locally" class="md-nav__link">
    <span class="md-ellipsis">
      Locally
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inside-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Inside Docker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result" class="md-nav__link">
    <span class="md-ellipsis">
      Result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      Python
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-python-3120-using-pyenv" class="md-nav__link">
    <span class="md-ellipsis">
      Install Python 3.12.0 Using pyenv
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-virtual-environment-named-teal" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Virtual Environment Named 'teal'
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activate-the-virtual-environment-teal" class="md-nav__link">
    <span class="md-ellipsis">
      Activate the Virtual Environment 'teal'
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dependencies-from-requirementstxt" class="md-nav__link">
    <span class="md-ellipsis">
      Install Dependencies from requirements.txt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Update Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-binaries" class="md-nav__link">
    <span class="md-ellipsis">
      Install Binaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#startup-the-fastapi-app" class="md-nav__link">
    <span class="md-ellipsis">
      Startup the FastAPI app
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    <span class="md-ellipsis">
      Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-the-app-with-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      Starting the App with Docker Compose
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unitintegration-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Unit/Integration Testing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Load Testing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Load Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#locally" class="md-nav__link">
    <span class="md-ellipsis">
      Locally
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inside-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Inside Docker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result" class="md-nav__link">
    <span class="md-ellipsis">
      Result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="developer-guide">Developer Guide</h1>
<h2 id="python">Python</h2>
<h3 id="install-python-3120-using-pyenv">Install Python 3.12.0 Using pyenv</h3>
<p>This command will download and install Python version 3.12.0. Pyenv is a popular tool for managing multiple versions of
Python on a single system.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>pyenv<span class="w"> </span>install<span class="w"> </span><span class="m">3</span>.12.0
</span></code></pre></div>
<h3 id="create-a-virtual-environment-named-teal">Create a Virtual Environment Named 'teal'</h3>
<p>This command will create a virtual environment using the Python version 3.12.0 that was just installed. Virtual
environments are useful for managing project-specific dependencies.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>pyenv<span class="w"> </span>virtualenv<span class="w"> </span><span class="m">3</span>.12.0<span class="w"> </span>teal
</span></code></pre></div>
<h3 id="activate-the-virtual-environment-teal">Activate the Virtual Environment 'teal'</h3>
<p>Activating the virtual environment ensures that any Python commands run will use the packages and interpreter from the '
teal' environment.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>pyenv<span class="w"> </span>activate<span class="w"> </span>teal
</span></code></pre></div>
<h3 id="install-dependencies-from-requirementstxt">Install Dependencies from requirements.txt</h3>
<p>This command will install all the necessary packages listed in the requirements.txt file. This file typically contains a
list of all the Python packages required for the project.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.in
</span></code></pre></div>
<h3 id="update-dependencies">Update Dependencies</h3>
<p>To update the dependencies, first modify the <code>requirements.in</code> file with the desired package versions or additions.
Then, run the following command to generate an updated requirements.txt file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>pip-compile<span class="w"> </span>--output-file<span class="o">=</span>requirements.txt
</span></code></pre></div>
<p>This will ensure that the requirements.txt file is synchronized with the changes made in requirements.in.</p>
<blockquote>
<p><em>Note:</em> <em>pip-compile</em> is a tool from the pip-tools package. If you don't have it installed, you can add it using pip
install pip-tools. For more information, visit
the <a href="https://pip-tools.readthedocs.io/en/stable/">pip-tools documentation</a>.</p>
</blockquote>
<h3 id="install-binaries">Install Binaries</h3>
<p>The easiest way is just to run the app inside the Docker container. This approach ensures that all necessary binaries
are included and configured correctly without needing to manage them manually on your local system. Docker containers
provide a consistent and isolated environment, which helps avoid issues related to different operating systems or
library versions.</p>
<p>The following binaries (debian packages) are needed:</p>
<ul>
<li>tesseract-ocr</li>
<li>tesseract-ocr-eng (and additional required languages)</li>
<li>poppler-utils</li>
<li>ocrmypdf</li>
<li>ghostscript</li>
<li>python3-tk</li>
<li>libgl1</li>
<li>libreoffice (bookworm-backports)</li>
<li>libreoffice-java-common (bookworm-backports)</li>
<li>default-jre-headless</li>
</ul>
<p>The following binaries must be installed manually:</p>
<ul>
<li>verapdf</li>
</ul>
<p>For more details have a look at the <a href="https://github.com/rueedlinger/teal/blob/main/Dockerfile">Dockerfile</a>.</p>
<h3 id="startup-the-fastapi-app">Startup the FastAPI app</h3>
<p>This will start the FastAPI app. BUT Some APIs within the FastAPI application may depend on external binaries or system
packages. Make sure these dependencies are installed and properly configured on your system. For instance, if an API
endpoint requires tesseract or libreoffice, these binaries must be available in your system's PATH.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>uvicorn<span class="w"> </span>teal.api:app<span class="w"> </span>--reload
</span></code></pre></div>
<h2 id="docker">Docker</h2>
<h3 id="starting-the-app-with-docker-compose">Starting the App with Docker Compose</h3>
<p>To start up the whole app with all libraries and binaries, just build and run the container with Docker Compose. This
approach ensures that the entire application, including all dependencies and necessary binaries, is consistently and
reliably set up in a containerized environment.</p>
<p>To build and run the container, use the following command</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>--build
</span></code></pre></div>
<h2 id="unitintegration-testing">Unit/Integration Testing</h2>
<p>To run pytest inside the Docker container, set the environment variable <code>TEAL_TEST_MODE=true</code>. If you need to pass
arguments to pytest, you can use the <code>TEAL_PYTEST_ARGS</code> environment variable.</p>
<p>To run pytest without additional arguments, use the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>run<span class="w"> </span>--build<span class="w"> </span>--name<span class="w"> </span>teal_pytest<span class="w"> </span><span class="se">\</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span>--rm<span class="w"> </span>-e<span class="w"> </span><span class="nv">TEAL_TEST_MODE</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>teal
</span></code></pre></div>
<p>If you need to pass arguments to pytest, set the <code>TEAL_PYTEST_ARGS</code> environment variable. For example, to run tests in
verbose mode, you can use:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>run<span class="w"> </span>--build<span class="w"> </span>--name<span class="w"> </span>teal_pytest<span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span>--rm<span class="w"> </span>-e<span class="w"> </span><span class="nv">TEAL_TEST_MODE</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>-e<span class="w"> </span><span class="nv">TEAL_PYTEST_ARGS</span><span class="o">=</span><span class="s2">&quot;-v&quot;</span><span class="w"> </span>teal
</span></code></pre></div>
<h2 id="load-testing">Load Testing</h2>
<p>You can run the load test locally or inside a Docker container.</p>
<h3 id="locally">Locally</h3>
<p>The following command will start the load test with Locust. Note that the application must be running on port 8000 when
you start the load test.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>locust<span class="w"> </span>--host<span class="w"> </span>http://localhost:8000<span class="w"> </span>--users<span class="w"> </span><span class="m">5</span><span class="w"> </span>-t<span class="w"> </span>10m<span class="w"> </span><span class="se">\</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span>--autostart<span class="w"> </span>-f<span class="w"> </span>tests/locustfile.py
</span></code></pre></div>
<p>You can view the results with the Locust web UI at http://0.0.0.0:8089/.</p>
<h3 id="inside-docker">Inside Docker</h3>
<p>The following command will start the Locust web UI inside the Docker container:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>run<span class="w"> </span>--build<span class="w"> </span>--rm<span class="w"> </span>-p<span class="w"> </span><span class="m">8089</span>:8089<span class="w"> </span>-p<span class="w"> </span><span class="m">8000</span>:8000<span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span>-e<span class="w"> </span><span class="nv">TEAL_START_LOCUST</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>teal
</span></code></pre></div>
<p>The -e <code>TEAL_START_LOCUST=true</code> environment variable signals the container to start Locust.</p>
<p>You can now start the load test from the Locust web UI, accessible at http://0.0.0.0:8089/. To begin, navigate to this
URL in your web browser. From the interface, you can configure various test parameters such as the number of users,
spawn rate, and duration of the test. Once your settings are in place, click the "Start" button to initiate the load
test. As the test runs, you can monitor real-time performance metrics and view detailed statistics on response times,
failure rates, and other key indicators. This will help you assess the performance and stability of your application
under load.</p>
<h3 id="result">Result</h3>
<p>The test was performed on a MacBook Pro (2023 model, Apple M2 Max, 64GB
RAM). Docker settings were configured with a memory limit of 16GB and a CPU limit of 12 cores. Please note that the
results obtained from this test may vary based on differences in hardware and software configurations in your setup.</p>
<p>The following load test was conducted with 5 user for a duration of 10 minutes. The test configuration included 1
worker with a timeout of 120 seconds. The PDF document used for all test has a size of 17 KB (16'873 bytes, one page).</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th># Requests</th>
<th># Fails</th>
<th>Median (ms)</th>
<th>95%ile (ms)</th>
<th>99%ile (ms)</th>
<th>Average (ms)</th>
<th>Min (ms)</th>
<th>Max (ms)</th>
<th>Average size (bytes)</th>
<th>Current RPS</th>
<th>Current Failures/s</th>
</tr>
</thead>
<tbody>
<tr>
<td>POST</td>
<td>/libreoffice/convert</td>
<td>191</td>
<td>0</td>
<td>4600</td>
<td>8800</td>
<td>10000</td>
<td>4766.63</td>
<td>500</td>
<td>12394</td>
<td>21297</td>
<td>0.2</td>
<td>0</td>
</tr>
<tr>
<td>POST</td>
<td>/pdf/ocr</td>
<td>209</td>
<td>0</td>
<td>1400</td>
<td>2600</td>
<td>2800</td>
<td>1509.29</td>
<td>684</td>
<td>3499</td>
<td>635</td>
<td>0.5</td>
<td>0</td>
</tr>
<tr>
<td>POST</td>
<td>/pdf/table</td>
<td>212</td>
<td>0</td>
<td>1300</td>
<td>2400</td>
<td>2600</td>
<td>1370.22</td>
<td>558</td>
<td>2955</td>
<td>2</td>
<td>0.1</td>
<td>0</td>
</tr>
<tr>
<td>POST</td>
<td>/pdf/text</td>
<td>223</td>
<td>0</td>
<td>780</td>
<td>2000</td>
<td>2300</td>
<td>783.64</td>
<td>2</td>
<td>2740</td>
<td>654</td>
<td>0.4</td>
<td>0</td>
</tr>
<tr>
<td>POST</td>
<td>/pdfa/convert</td>
<td>197</td>
<td>0</td>
<td>4600</td>
<td>9300</td>
<td>11000</td>
<td>4845.74</td>
<td>305</td>
<td>11176</td>
<td>21436</td>
<td>0.2</td>
<td>0</td>
</tr>
<tr>
<td>POST</td>
<td>/pdfa/validate</td>
<td>213</td>
<td>0</td>
<td>1500</td>
<td>2500</td>
<td>3000</td>
<td>1522.62</td>
<td>767</td>
<td>3499</td>
<td>171</td>
<td>0.5</td>
<td>0</td>
</tr>
<tr>
<td><strong>Aggregated</strong></td>
<td></td>
<td><strong>1245</strong></td>
<td><strong>0</strong></td>
<td><strong>1600</strong></td>
<td><strong>6900</strong></td>
<td><strong>9500</strong></td>
<td><strong>2385.57</strong></td>
<td><strong>2</strong></td>
<td><strong>12394</strong></td>
<td><strong>6912.47</strong></td>
<td><strong>1.9</strong></td>
<td><strong>0</strong></td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>